#!/bin/bash


function createPage () {
	
echo "---> Installing application source"
cp -Rf /tmp/src/*.html ./

DATE=`date "+%b %d, %Y @ %H:%M %p"`

echo "---> Creating info page"
echo "Page built on $DATE" >> ./info.html
echo "Page proudly built by $(whoami)" >> ./info.html 
echo "Proudly served by Apache HTTP Server version $HTTPD_VERSION" >> ./info.html

fix-permissions ./

}

echo "Making pre-invocation changes...."

#/usr/libexec/s2i/assemble
rc=$?

if [ $rc -eq 0 ]; 
then
	echo "Making post-invocation changes....."
	createPage
	echo "Post Invocation changes complete"
else
	echo "Error: assembly falied!"

fi

exit $rc
